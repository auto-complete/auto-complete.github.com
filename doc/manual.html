<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>Auto-Complete - User Manual</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="style.css" type="text/css" />
</head>
<body>
<div id="header">
<h1 class="title">Auto-Complete - User Manual</h1>
</div>
<div id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a></li>
<li><a href="#downloads"><span class="toc-section-number">2</span> Downloads</a></li>
<li><a href="#installation"><span class="toc-section-number">3</span> Installation</a><ul>
<li><a href="#requirements"><span class="toc-section-number">3.1</span> Requirements</a></li>
<li><a href="#automatic-installation"><span class="toc-section-number">3.2</span> Automatic Installation</a></li>
<li><a href="#manual-installation"><span class="toc-section-number">3.3</span> Manual Installation</a></li>
<li><a href="#after-installation-check"><span class="toc-section-number">3.4</span> After-Installation Check</a></li>
</ul></li>
<li><a href="#basic-usage"><span class="toc-section-number">4</span> Basic Usage</a><ul>
<li><a href="#input-characters"><span class="toc-section-number">4.1</span> Input Characters</a></li>
<li><a href="#completion-by-tab"><span class="toc-section-number">4.2</span> Completion by TAB</a></li>
<li><a href="#completion-by-ret"><span class="toc-section-number">4.3</span> Completion by RET</a></li>
<li><a href="#candidate-selection"><span class="toc-section-number">4.4</span> Candidate Selection</a></li>
<li><a href="#help"><span class="toc-section-number">4.5</span> Help</a></li>
<li><a href="#summary"><span class="toc-section-number">4.6</span> Summary</a></li>
</ul></li>
<li><a href="#advanced-usage"><span class="toc-section-number">5</span> Advanced Usage</a><ul>
<li><a href="#auto-complete-command"><span class="toc-section-number">5.1</span> <code>auto-complete</code> command</a></li>
<li><a href="#completion-by-fuzzy-matching"><span class="toc-section-number">5.2</span> Completion by Fuzzy Matching</a></li>
<li><a href="#filtering-completion-candidates"><span class="toc-section-number">5.3</span> Filtering Completion Candidates</a></li>
<li><a href="#trigger-key"><span class="toc-section-number">5.4</span> Trigger Key</a></li>
<li><a href="#candidate-suggestion"><span class="toc-section-number">5.5</span> Candidate Suggestion</a></li>
<li><a href="#completion-by-dictionary"><span class="toc-section-number">5.6</span> Completion by Dictionary</a><ul>
<li><a href="#user-defined-dictionary"><span class="toc-section-number">5.6.1</span> User Defined Dictionary</a></li>
<li><a href="#major-mode-dictionary-and-extension-dictionary"><span class="toc-section-number">5.6.2</span> Major Mode Dictionary and Extension Dictionary</a></li>
</ul></li>
</ul></li>
<li><a href="#source"><span class="toc-section-number">6</span> Source</a><ul>
<li><a href="#using-source"><span class="toc-section-number">6.1</span> Using Source</a></li>
<li><a href="#builtin-sources"><span class="toc-section-number">6.2</span> Builtin Sources</a><ul>
<li><a href="#ac-source-abbrev"><span class="toc-section-number">6.2.1</span> <code>ac-source-abbrev</code></a></li>
<li><a href="#ac-source-css-property"><span class="toc-section-number">6.2.2</span> <code>ac-source-css-property</code></a></li>
<li><a href="#ac-source-dictionary"><span class="toc-section-number">6.2.3</span> <code>ac-source-dictionary</code></a></li>
<li><a href="#ac-source-eclim"><span class="toc-section-number">6.2.4</span> <code>ac-source-eclim</code></a></li>
<li><a href="#ac-source-features"><span class="toc-section-number">6.2.5</span> <code>ac-source-features</code></a></li>
<li><a href="#ac-source-filename"><span class="toc-section-number">6.2.6</span> <code>ac-source-filename</code></a></li>
<li><a href="#ac-source-files-in-current-dir"><span class="toc-section-number">6.2.7</span> <code>ac-source-files-in-current-dir</code></a></li>
<li><a href="#ac-source-functions"><span class="toc-section-number">6.2.8</span> <code>ac-source-functions</code></a></li>
<li><a href="#ac-source-ghc-mod"><span class="toc-section-number">6.2.9</span> <code>ac-source-ghc-mod</code></a></li>
<li><a href="#ac-source-gtags"><span class="toc-section-number">6.2.10</span> <code>ac-source-gtags</code></a></li>
<li><a href="#ac-source-imenu"><span class="toc-section-number">6.2.11</span> <code>ac-source-imenu</code></a></li>
<li><a href="#ac-source-semantic"><span class="toc-section-number">6.2.12</span> <code>ac-source-semantic</code></a></li>
<li><a href="#ac-source-slime"><span class="toc-section-number">6.2.13</span> <code>ac-source-slime</code></a></li>
<li><a href="#ac-source-semantic-raw"><span class="toc-section-number">6.2.14</span> <code>ac-source-semantic-raw</code></a></li>
<li><a href="#ac-source-symbols"><span class="toc-section-number">6.2.15</span> <code>ac-source-symbols</code></a></li>
<li><a href="#ac-source-variables"><span class="toc-section-number">6.2.16</span> <code>ac-source-variables</code></a></li>
<li><a href="#ac-source-words-in-all-buffer"><span class="toc-section-number">6.2.17</span> <code>ac-source-words-in-all-buffer</code></a></li>
<li><a href="#ac-source-words-in-buffer"><span class="toc-section-number">6.2.18</span> <code>ac-source-words-in-buffer</code></a></li>
<li><a href="#ac-source-words-in-same-mode-buffers"><span class="toc-section-number">6.2.19</span> <code>ac-source-words-in-same-mode-buffers</code></a></li>
<li><a href="#ac-source-yasnippet"><span class="toc-section-number">6.2.20</span> <code>ac-source-yasnippet</code></a></li>
</ul></li>
</ul></li>
<li><a href="#tips"><span class="toc-section-number">7</span> Tips</a><ul>
<li><a href="#not-to-complete-automatically"><span class="toc-section-number">7.1</span> Not to complete automatically</a></li>
<li><a href="#not-to-show-completion-menu-automatically"><span class="toc-section-number">7.2</span> Not to show completion menu automatically</a></li>
<li><a href="#stop-completion"><span class="toc-section-number">7.3</span> Stop completion</a></li>
<li><a href="#finish-completion-by-tab"><span class="toc-section-number">7.4</span> Finish completion by TAB</a></li>
<li><a href="#select-candidates-with-c-nc-p-only-when-completion-menu-is-displayed"><span class="toc-section-number">7.5</span> Select candidates with C-n/C-p only when completion menu is displayed</a></li>
<li><a href="#not-to-use-quick-help"><span class="toc-section-number">7.6</span> Not to use quick help</a></li>
<li><a href="#change-a-height-of-completion-menu"><span class="toc-section-number">7.7</span> Change a height of completion menu</a></li>
<li><a href="#enable-auto-complete-mode-automatically-for-specific-modes"><span class="toc-section-number">7.8</span> Enable <code>auto-complete-mode</code> automatically for specific modes</a></li>
<li><a href="#ignore-case"><span class="toc-section-number">7.9</span> Ignore case</a></li>
<li><a href="#stop-completion-automatically-after-inserting-specific-words"><span class="toc-section-number">7.10</span> Stop completion automatically after inserting specific words</a></li>
<li><a href="#change-colors"><span class="toc-section-number">7.11</span> Change colors</a></li>
<li><a href="#change-default-sources"><span class="toc-section-number">7.12</span> Change default sources</a></li>
<li><a href="#change-sources-for-specific-major-modes"><span class="toc-section-number">7.13</span> Change sources for specific major modes</a></li>
<li><a href="#completion-with-specific-source"><span class="toc-section-number">7.14</span> Completion with specific source</a></li>
<li><a href="#show-help-persistently"><span class="toc-section-number">7.15</span> Show help persistently</a></li>
<li><a href="#show-a-lastly-completed-candidate-help"><span class="toc-section-number">7.16</span> Show a lastly completed candidate help</a></li>
<li><a href="#show-help-beautifully"><span class="toc-section-number">7.17</span> Show help beautifully</a></li>
</ul></li>
<li><a href="#third-party-extensions"><span class="toc-section-number">8</span> Third-party Extensions</a><ul>
<li><a href="#slime"><span class="toc-section-number">8.1</span> SLIME</a></li>
<li><a href="#scala"><span class="toc-section-number">8.2</span> Scala</a></li>
</ul></li>
<li><a href="#configuration"><span class="toc-section-number">9</span> Configuration</a><ul>
<li><a href="#ac-delay"><span class="toc-section-number">9.1</span> <code>ac-delay</code></a></li>
<li><a href="#ac-auto-show-menu"><span class="toc-section-number">9.2</span> <code>ac-auto-show-menu</code></a></li>
<li><a href="#ac-show-menu-immediately-on-auto-complete"><span class="toc-section-number">9.3</span> <code>ac-show-menu-immediately-on-auto-complete</code></a></li>
<li><a href="#ac-expand-on-auto-complete"><span class="toc-section-number">9.4</span> <code>ac-expand-on-auto-complete</code></a></li>
<li><a href="#ac-disable-faces"><span class="toc-section-number">9.5</span> <code>ac-disable-faces</code></a></li>
<li><a href="#ac-stop-flymake-on-completing"><span class="toc-section-number">9.6</span> <code>ac-stop-flymake-on-completing</code></a></li>
<li><a href="#ac-use-fuzzy"><span class="toc-section-number">9.7</span> <code>ac-use-fuzzy</code></a></li>
<li><a href="#ac-fuzzy-cursor-color"><span class="toc-section-number">9.8</span> <code>ac-fuzzy-cursor-color</code></a></li>
<li><a href="#ac-use-comphist"><span class="toc-section-number">9.9</span> <code>ac-use-comphist</code></a></li>
<li><a href="#ac-comphist-threshold"><span class="toc-section-number">9.10</span> <code>ac-comphist-threshold</code></a></li>
<li><a href="#ac-comphist-file"><span class="toc-section-number">9.11</span> <code>ac-comphist-file</code></a></li>
<li><a href="#ac-use-quick-help"><span class="toc-section-number">9.12</span> <code>ac-use-quick-help</code></a></li>
<li><a href="#ac-quick-help-delay"><span class="toc-section-number">9.13</span> <code>ac-quick-help-delay</code></a></li>
<li><a href="#ac-menu-height"><span class="toc-section-number">9.14</span> <code>ac-menu-height</code></a></li>
<li><a href="#ac-quick-help-height"><span class="toc-section-number">9.15</span> <code>ac-quick-help-height</code></a></li>
<li><a href="#ac-quick-help-prefer-pos-tip"><span class="toc-section-number">9.16</span> <code>ac-quick-help-prefer-pos-tip</code></a></li>
<li><a href="#ac-candidate-limit"><span class="toc-section-number">9.17</span> <code>ac-candidate-limit</code></a></li>
<li><a href="#ac-modes"><span class="toc-section-number">9.18</span> <code>ac-modes</code></a></li>
<li><a href="#ac-compatible-packages-regexp"><span class="toc-section-number">9.19</span> <code>ac-compatible-packages-regexp</code></a></li>
<li><a href="#ac-non-trigger-commands"><span class="toc-section-number">9.20</span> <code>ac-non-trigger-commands</code></a></li>
<li><a href="#ac-trigger-commands"><span class="toc-section-number">9.21</span> <code>ac-trigger-commands</code></a></li>
<li><a href="#ac-trigger-commands-on-completing"><span class="toc-section-number">9.22</span> <code>ac-trigger-commands-on-completing</code></a></li>
<li><a href="#ac-trigger-key"><span class="toc-section-number">9.23</span> <code>ac-trigger-key</code></a></li>
<li><a href="#ac-auto-start"><span class="toc-section-number">9.24</span> <code>ac-auto-start</code></a></li>
<li><a href="#ac-stop-words"><span class="toc-section-number">9.25</span> <code>ac-stop-words</code></a></li>
<li><a href="#ac-use-dictionary-as-stop-words"><span class="toc-section-number">9.26</span> <code>ac-use-dictionary-as-stop-words</code></a></li>
<li><a href="#ac-ignore-case"><span class="toc-section-number">9.27</span> <code>ac-ignore-case</code></a></li>
<li><a href="#ac-dwim"><span class="toc-section-number">9.28</span> <code>ac-dwim</code></a></li>
<li><a href="#ac-use-menu-map"><span class="toc-section-number">9.29</span> <code>ac-use-menu-map</code></a></li>
<li><a href="#ac-use-overriding-local-map"><span class="toc-section-number">9.30</span> <code>ac-use-overriding-local-map</code></a></li>
<li><a href="#ac-completion-face"><span class="toc-section-number">9.31</span> <code>ac-completion-face</code></a></li>
<li><a href="#ac-candidate-face"><span class="toc-section-number">9.32</span> <code>ac-candidate-face</code></a></li>
<li><a href="#ac-selection-face"><span class="toc-section-number">9.33</span> <code>ac-selection-face</code></a></li>
<li><a href="#global-auto-complete-mode"><span class="toc-section-number">9.34</span> <code>global-auto-complete-mode</code></a></li>
<li><a href="#ac-user-dictionary"><span class="toc-section-number">9.35</span> <code>ac-user-dictionary</code></a></li>
<li><a href="#ac-user-dictionary-files"><span class="toc-section-number">9.36</span> <code>ac-user-dictionary-files</code></a></li>
<li><a href="#ac-dictionary-directories"><span class="toc-section-number">9.37</span> <code>ac-dictionary-directories</code></a></li>
<li><a href="#ac-sources"><span class="toc-section-number">9.38</span> <code>ac-sources</code></a></li>
<li><a href="#ac-completing-map"><span class="toc-section-number">9.39</span> <code>ac-completing-map</code></a></li>
<li><a href="#ac-menu-map"><span class="toc-section-number">9.40</span> <code>ac-menu-map</code></a></li>
<li><a href="#ac-mode-map"><span class="toc-section-number">9.41</span> <code>ac-mode-map</code></a></li>
</ul></li>
<li><a href="#extend"><span class="toc-section-number">10</span> Extend</a><ul>
<li><a href="#prototype"><span class="toc-section-number">10.1</span> Prototype</a></li>
<li><a href="#example"><span class="toc-section-number">10.2</span> Example</a></li>
<li><a href="#initialization"><span class="toc-section-number">10.3</span> Initialization</a></li>
<li><a href="#cache"><span class="toc-section-number">10.4</span> Cache</a><ul>
<li><a href="#cache-expiration"><span class="toc-section-number">10.4.1</span> Cache Expiration</a></li>
</ul></li>
<li><a href="#action"><span class="toc-section-number">10.5</span> Action</a></li>
<li><a href="#omni-completion"><span class="toc-section-number">10.6</span> Omni Completion</a></li>
<li><a href="#ac-define-source"><span class="toc-section-number">10.7</span> <code>ac-define-source</code></a><ul>
<li><a href="#source-properties"><span class="toc-section-number">10.7.1</span> Source Properties</a></li>
<li><a href="#prefix"><span class="toc-section-number">10.7.2</span> <code>prefix</code></a></li>
<li><a href="#requires"><span class="toc-section-number">10.7.3</span> <code>requires</code></a></li>
<li><a href="#action-1"><span class="toc-section-number">10.7.4</span> <code>action</code></a></li>
<li><a href="#limit"><span class="toc-section-number">10.7.5</span> <code>limit</code></a></li>
<li><a href="#symbol"><span class="toc-section-number">10.7.6</span> <code>symbol</code></a></li>
<li><a href="#summary-1"><span class="toc-section-number">10.7.7</span> <code>summary</code></a></li>
<li><a href="#cache-1"><span class="toc-section-number">10.7.8</span> <code>cache</code></a></li>
<li><a href="#require"><span class="toc-section-number">10.7.9</span> <code>require</code></a></li>
<li><a href="#candidate-face"><span class="toc-section-number">10.7.10</span> <code>candidate-face</code></a></li>
<li><a href="#selection-face"><span class="toc-section-number">10.7.11</span> <code>selection-face</code></a></li>
<li><a href="#depends"><span class="toc-section-number">10.7.12</span> <code>depends</code></a></li>
<li><a href="#available"><span class="toc-section-number">10.7.13</span> <code>available</code></a></li>
<li><a href="#document"><span class="toc-section-number">10.7.14</span> <code>document</code></a></li>
</ul></li>
<li><a href="#variables"><span class="toc-section-number">10.8</span> Variables</a><ul>
<li><a href="#ac-buffer"><span class="toc-section-number">10.8.1</span> <code>ac-buffer</code></a></li>
<li><a href="#ac-point"><span class="toc-section-number">10.8.2</span> <code>ac-point</code></a></li>
<li><a href="#ac-prefix"><span class="toc-section-number">10.8.3</span> <code>ac-prefix</code></a></li>
<li><a href="#ac-limit"><span class="toc-section-number">10.8.4</span> <code>ac-limit</code></a></li>
<li><a href="#ac-candidates"><span class="toc-section-number">10.8.5</span> <code>ac-candidates</code></a></li>
</ul></li>
</ul></li>
<li><a href="#trouble-shooting"><span class="toc-section-number">11</span> Trouble Shooting</a><ul>
<li><a href="#response-latency"><span class="toc-section-number">11.1</span> Response Latency</a><ul>
<li><a href="#ac-auto-start-1"><span class="toc-section-number">11.1.1</span> <code id="trouble-ac-auto-start">ac-auto-start</code></a></li>
<li><a href="#ac-delay-1"><span class="toc-section-number">11.1.2</span> <code id="trouble-ac-delay">ac-delay</code></a></li>
<li><a href="#ac-auto-show-menu-1"><span class="toc-section-number">11.1.3</span> <code id="trouble-ac-auto-show-menu">ac-auto-show-menu</code></a></li>
<li><a href="#ac-use-comphist-1"><span class="toc-section-number">11.1.4</span> <code id="trouble-ac-use-comphist">ac-use-comphist</code></a></li>
<li><a href="#ac-candidate-limit-1"><span class="toc-section-number">11.1.5</span> <code id="trouble-ac-candidate-limit">ac-candidate-limit</code></a></li>
</ul></li>
<li><a href="#completion-menu-is-disrupted"><span class="toc-section-number">11.2</span> Completion menu is disrupted</a><ul>
<li><a href="#column-computation-case"><span class="toc-section-number">11.2.1</span> Column Computation Case</a></li>
<li><a href="#font-case"><span class="toc-section-number">11.2.2</span> Font Case</a></li>
</ul></li>
</ul></li>
<li><a href="#known-bugs"><span class="toc-section-number">12</span> Known Bugs</a><ul>
<li><a href="#flyspell-mode-bug"><span class="toc-section-number">12.1</span> Auto completion will not be started in a buffer <code>flyspell-mode</code> enabled</a></li>
<li><a href="#linum-mode-bug"><span class="toc-section-number">12.2</span> <code>linum-mode</code> tries to display the line numbers even for the comletion menu</a></li>
</ul></li>
<li><a href="#reporting-bugs"><span class="toc-section-number">13</span> Reporting Bugs</a></li>
</ul>
</div>
<h1 id="introduction"><a href="#introduction"><span class="header-section-number">1</span> Introduction</a></h1>
<p>Auto-Complete (a.k.a <code>auto-complete.el</code>, <code>auto-complete-mode</code>) is an extension that automates and advances the completion-system of GNU Emacs. It is superior to the old system. Features include:</p>
<ul>
<li>Visual interface</li>
<li>Reduce overhead of completion by using a statistical method</li>
<li>Extensibility</li>
</ul>
<p>This user manual covers from how to install and use to how to extend. Please contact me if you have any questions.</p>
<p>Auto Complete Mode is licensed under the terms of GPLv3. And this document is licensed under the term of GFDL.</p>
<h1 id="downloads"><a href="#downloads"><span class="header-section-number">2</span> Downloads</a></h1>
<p>You can download the latest auto-complete from <a href="http://auto-complete.org/">the official site</a>.</p>
<h1 id="installation"><a href="#installation"><span class="header-section-number">3</span> Installation</a></h1>
<h2 id="requirements"><a href="#requirements"><span class="header-section-number">3.1</span> Requirements</a></h2>
<ul>
<li>800MHz or higher CPU</li>
<li>256MB or higher RAM</li>
<li>GNU Emacs 22 or later</li>
</ul>
<h2 id="automatic-installation"><a href="#automatic-installation"><span class="header-section-number">3.2</span> Automatic Installation</a></h2>
<p>It is easy to install by using an installation script called <code>etc/install.el</code> that is located in the package directory.</p>
<p>Type <code>M-x load-file RET</code> in a running or newly-launched Emacs. Note that if you want to upgrade <code>auto-complete-mode</code>, you have to install in <strong>a newly launched Emacs with the <code>-q</code> option</strong>. Then input a file name to load which is a path string with adding <code>/etc/install.el</code> to the package directory. For example, if the package directory is <code>~/tmp/auto-complete-1.2</code>, the file name will be <code>~/tmp/auto-complete-1.2/etc/install.el</code>.</p>
<p>Then input a directory where Auto Complete will be installed. You need to add a directory to <code>load-path</code> later if <code>load-path</code> doesn't include the directory. The directory is to be <code>~/.emacs.d</code> by default.</p>
<p>Finally type <code>RET</code> to start installation. After installation, you may see the following buffer and follow instructions to edit <code>.emacs</code>.</p>
<p>You can also install from terminal like:</p>
<pre><code>$ make install
$ # or with directory specified
$ make install DIR=$HOME/.emacs.d/</code></pre>
<p>If you don't have GNU Make, run emacs like:</p>
<pre><code>$ emacs -batch -l etc/install.el</code></pre>
<p><strong>Example message after installation (*Installation Result* Buffer)</strong></p>
<pre><code>Successfully installed!

Add the following code to your .emacs:

(add-to-list &#39;load-path &quot;~/.emacs.d&quot;)    ; This may not be appeared if you have already added.
(require &#39;auto-complete-config)
(add-to-list &#39;ac-dictionary-directories &quot;~/.emacs.d/ac-dict&quot;)
(ac-config-default)</code></pre>
<h2 id="manual-installation"><a href="#manual-installation"><span class="header-section-number">3.3</span> Manual Installation</a></h2>
<p>It is also possible to install manually if you follow a directory configuration. First, byte-compile all <code>.el</code> files in the package directory. You may use <code>Makefile</code> in UNIX OS.</p>
<pre><code>$ make byte-compile</code></pre>
<p>If you can't use <code>Makefile</code>, open the directory from Emacs by <code>C-x d</code> and type <code>* . el RET B RET</code> to do byte-compile.</p>
<p>Then copy all <code>.el</code> files and <code>.elc</code> files to a directory which is added to <code>load-path</code>. You may do such the following command if the directory is <code>~/.emacs.d</code></p>
<pre><code>$ cp *.el *.elc ~/.emacs.d</code></pre>
<p>And then install dictionary files. They are optional to run Auto Complete Mode, but you should install if you don't have any reason. Dictionary files are located in called <code>dict</code> directory, it is needed that they are installed to a directory which is <code>auto-complete.el</code> has been installed. If you installed <code>auto-complete.el</code> to a directory called <code>~/.emacs.d</code>, you also have to install dictionary files to <code>~/.emacs.d</code>. Please be careful not to overwrite existed files. It may be a rare case, but the installation script above avoids overwrite by renaming <code>dict</code> directory to <code>ac-dict</code> directory.</p>
<pre><code>$ cp -r dict ~/.emacs.d</code></pre>
<p>Finally add the following code to <code>.emacs</code>:</p>
<pre><code>(add-to-list &#39;ac-dictionary-directories &quot;~/.emacs.d/dict&quot;)
(require &#39;auto-complete-config)
(ac-config-default)</code></pre>
<p>If you haven't added the directory to <code>load-path</code>, you need to add the following code too.</p>
<pre><code>(add-to-list &#39;load-path &quot;~/.emacs.d&quot;)</code></pre>
<h2 id="after-installation-check"><a href="#after-installation-check"><span class="header-section-number">3.4</span> After-Installation Check</a></h2>
<p>Type some characters in *scratch* buffer in a restarted or newly-launched Emacs. Installation has been successful if you see a completion menu. If you have an error or no completion is started, it could be a failure. Please contact me in such case with confirmation following:</p>
<ul>
<li><p>Using correct <code>load-path</code>?</p>
<p>A directory which <code>auto-complete.el</code> is installed to is in <code>load-path</code>.</p></li>
<li><p>Characters <code>AC</code> in mode-line?</p>
<p>If you don't see characters <code>AC</code> in mode-line (a gray line of bottom of buffer), <code>auto-complete-mode</code> is not enabled. Type <code>M-x auto-complete-mode</code> to enable and try again.</p></li>
<li><p>Error occurred</p>
<p>If you have *Backtrace* with errors or errors in minibuffer (bottom of frame), please contact me with the errors.</p></li>
</ul>
<h1 id="basic-usage"><a href="#basic-usage"><span class="header-section-number">4</span> Basic Usage</a></h1>
<p>First, in a meaning, <code>auto-complete-mode</code> has no &quot;usage&quot;. Because <code>auto-complete-mode</code> is designed to fade into the Emacs editing system. Users will receive a highly-developed completion system automatically without any difficulty. Ultimately, a goal of <code>auto-complete-mode</code> is to provide a system that does what users want without any command, but it is impossible to accomplish 100% accuracy actually. So there is &quot;usage&quot; to cover those points.</p>
<h2 id="input-characters"><a href="#input-characters"><span class="header-section-number">4.1</span> Input Characters</a></h2>
<p>Inputting characters is basic. Completions will never be shown without any character. So when completion will be started, what character causes completion to be started? It is a good question but it is difficult to answer here. In simple words, completion will be started when a character is inserted. See <a href="#ac-trigger-commands"><code>ac-trigger-commands</code></a> for more details.</p>
<div class="figure">
<img src="ac.png" alt="Inputting Characters" /><p class="caption">Inputting Characters</p>
</div>
<h2 id="completion-by-tab"><a href="#completion-by-tab"><span class="header-section-number">4.2</span> Completion by TAB</a></h2>
<p>After completion is started, completion by TAB will be enabled temporarily. Completion by TAB is the most important and most frequent used command. TAB has several meanings.</p>
<ul>
<li><p>Case that only one candidate remains</p>
<p>If only one candidate remains, the candidate will be used to complete.</p></li>
<li><p>Case that there is a common part among candidates</p>
<p>For example, if all candidates start with &quot;set&quot;, it means they have a common part &quot;set&quot;. So TAB completes &quot;set&quot; at first.</p></li>
<li><p>Otherwise</p>
<p>Otherwise, select candidates in cycle by typing TAB.</p></li>
</ul>
<p>It may be a little different according to settings, but basically completion by TAB works as we wrote above. A reason why TAB has several meanings is that we want users to do anything with TAB.</p>
<h2 id="completion-by-ret"><a href="#completion-by-ret"><span class="header-section-number">4.3</span> Completion by RET</a></h2>
<p>Like completion by TAB but some points are different:</p>
<ul>
<li>Complete a selected candidate immediately</li>
<li>Execute an action if a selected candidate has the action</li>
</ul>
<p>It is necessary to type TAB a few times for completion by TAB. Completion by RET instead complete a selected candidate immediately, so when you see a candidate you want, just type RET. If the candidate has an action, the action will be executed. Take a example of builtin abbrev completion. In completion by TAB, an abbrev which expands &quot;www&quot; to &quot;World Wide Web&quot; will be completed to &quot;www&quot;, but in completion by RET, the abbrev will be expanded to &quot;World Wide Web&quot; as completion.</p>
<h2 id="candidate-selection"><a href="#candidate-selection"><span class="header-section-number">4.4</span> Candidate Selection</a></h2>
<p>Following the <code>auto-complete-mode</code> philosophy, it is not recommended to manually select candidates. That means it has been failed to guess the completion, and also it requires users to do candidate selection which is a high cost operation. We think there are so many cases that requires to do candidate selection, because completion by TAB will help candidate selection somehow and in recent versions, a statistical method contributes to make a candidate suggestion more accurate. However, actually, this is such cases. So we also think it is not bad idea to remember how to select candidates.</p>
<p>Selecting candidates is not a complex operation. You can select candidates forward or backward by cursor key or <code>M-p</code> and <code>M-n</code>. According to settings, a behavior of completion by TAB will be changed as a behavior of completion by RET. See <a href=""><code>ac-dwim</code></a> for more details.</p>
<p>There are other ways to select candidates. <code>M-1</code> to select candidate 1, <code>M-2</code> to select candidate 2, and so on.</p>
<h2 id="help"><a href="#help"><span class="header-section-number">4.5</span> Help</a></h2>
<p><code>auto-complete-mode</code> has two types of help functionalities called <em>Quick Help</em> and <em>Buffer Help</em>. They are different in a point of displaying. Quick help will appear at the side of completion menu, so you can easily see that, but there is a problem if there is no space to display the help. Quick help will be shown automatically. To use quick help, you need to set <a href="#ac-use-quick-help"><code>ac-use-quick-help</code></a> to <code>t</code>. Delay time to show quick help is given by <a href="#ac-quick-help-delay"><code>ac-quick-help-delay</code></a>.</p>
<p>On the other side, buffer help will not be shown without any instructions from users. Buffer help literally displays help in a buffer in another window. It costs more to see than quick help, but it has more readability. To show buffer help, press <code>C-?</code> or <code>f1</code>. By pressing <code>C-M-v</code> or <code>C-M-S-v</code> after showing buffer help, you can scroll forward or backward through the help buffer. Other commands will be fallbacked and buffer help will be closed.</p>
<h2 id="summary"><a href="#summary"><span class="header-section-number">4.6</span> Summary</a></h2>
<p>Completion will be started by inserting characters. After completion is started, operations in the following table will be enabled temporarily. After completion is finished, these operations will be disabled.</p>
<table>
<thead>
<tr class="header">
<th align="left">Key</th>
<th align="left">Command</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>TAB</code>, <code>C-i</code></td>
<td align="left"><code>ac-expand</code></td>
<td align="left">Completion by TAB</td>
</tr>
<tr class="even">
<td align="left"><code>RET</code>, <code>C-m</code></td>
<td align="left"><code>ac-complete</code></td>
<td align="left">Completion by RET</td>
</tr>
<tr class="odd">
<td align="left"><code>down</code>, <code>M-n</code></td>
<td align="left"><code>ac-next</code></td>
<td align="left">Select next candidate</td>
</tr>
<tr class="even">
<td align="left"><code>up</code>, <code>M-p</code></td>
<td align="left"><code>ac-previous</code></td>
<td align="left">Select previous candidate</td>
</tr>
<tr class="odd">
<td align="left"><code>C-?</code>, <code>f1</code></td>
<td align="left"><code>ac-help</code></td>
<td align="left">Show buffer help</td>
</tr>
</tbody>
</table>
<p>To stop completion, simply use <code>C-g</code>.</p>
<h1 id="advanced-usage"><a href="#advanced-usage"><span class="header-section-number">5</span> Advanced Usage</a></h1>
<h2 id="auto-complete-command"><a href="#auto-complete-command"><span class="header-section-number">5.1</span> <code>auto-complete</code> command</a></h2>
<p>Basically there is an assumption that <code>auto-complete-mode</code> will be started automatically, but there is also exception. For example, that is a case that an user wants to complete without inserting any character or a case not to start <code>auto-complete-mode</code> automatically by settings. A command called <code>auto-complete</code> is useful in such cases, which is used with key binding in general. The following code changes a default completion command to more advanced feature that <code>auto-complete-mode</code> provides.</p>
<pre><code>(define-key ac-mode-map (kbd &quot;M-TAB&quot;) &#39;auto-complete)</code></pre>
<p>So, as of <code>auto-complete</code> command, it is a little different from an original automatic completion.</p>
<ul>
<li><p>Case that only one candidate remains</p>
<p>Complete immediately without showing completion menu.</p></li>
<li><p>Case that no candidates remains</p>
<p>Attempt to complete with fuzzy matching. See <a href="#completion-by-fuzzy-matching">Completion by Fuzzy Matching</a> for more details.</p></li>
<li><p>Otherwise</p>
<p>Otherwise start completion with/without expanding a whole common part and showing completion menu. See also <a href="#ac-show-menu-immediately-on-auto-complete"><code>ac-show-menu-immediately-on-auto-complete</code></a> and <a href="#ac-expand-on-auto-complete"><code>ac-expand-on-auto-complete</code></a>.</p></li>
</ul>
<h2 id="completion-by-fuzzy-matching"><a href="#completion-by-fuzzy-matching"><span class="header-section-number">5.2</span> Completion by Fuzzy Matching</a></h2>
<p>In a case that there are no candidates by <code>auto-complete</code> command or the case where <code>ac-fuzzy-complete</code> command is executed, <code>auto-complete-mode</code> attempts to complete with fuzzy matching instead of the usual exact matching. Parameters of fuzzy matching have already been optimized for use, so users don't need to change them. However if you want to know the internals, see <code>fuzzy.el</code>. Using completion by fuzzy matching, typos will be fixed as a series of completion. For instance, input &quot;messaeg&quot; in a buffer, and then do <code>M-x auto-complete</code> or <code>M-x ac-fuzzy-complete</code>. The cursor color will be changed to red if completion has been successful, and then you can continue to complete, regarding &quot;messaeg&quot; as &quot;message&quot;. It is not a bad idea to bind <code>auto-complete</code> command to some key to handle such cases.</p>
<div class="figure">
<img src="ac-fuzzy.png" alt="Fuzzy matching" /><p class="caption">Fuzzy matching</p>
</div>
<h2 id="filtering-completion-candidates"><a href="#filtering-completion-candidates"><span class="header-section-number">5.3</span> Filtering Completion Candidates</a></h2>
<p>You can start filtering by <code>C-s</code>. The cursor color will change to blue. Then input characters to filter. It is possible to do completion by TAB or select candidates, which changes the cursor color to original so that telling filtering completion candidates has done. The filtering string will be restored when <code>C-s</code> again. To delete the filter string, press <code>DEL</code> or <code>C-h</code>. Other general operations is not allowed there.</p>
<div class="figure">
<img src="ac-isearch.png" alt="Filtering" /><p class="caption">Filtering</p>
</div>
<h2 id="trigger-key"><a href="#trigger-key"><span class="header-section-number">5.4</span> Trigger Key</a></h2>
<p>It is difficult what key <code>auto-complete</code> command is bound to. It should be bound to a key which is easy to press as much as possible because completion operation is often happened. However, it is a major problem that there is no empty key to press easily. <code>auto-complete-mode</code> provides a feature called <em>Trigger Key</em> that handles such the problem. Using trigger key, you can use an arbitrary key temporarily if necessary. The following code uses <code>TAB</code> as trigger key.</p>
<pre><code>(ac-set-trigger-key &quot;TAB&quot;)</code></pre>
<p>Trigger key will be enabled after inserting characters. Otherwise it is dealt as an usual command (TAB will be indent). Generally, trigger key is used with <code>ac-auto-start</code> being <code>nil</code>.</p>
<pre><code>(setq ac-auto-start nil)</code></pre>
<p>As of <code>ac-auto-start</code>, see <a href="#not-to-complete-automatically">Not to complete automatically</a> or <a href="#ac-auto-start"><code>ac-auto-start</code></a> for more details.</p>
<h2 id="candidate-suggestion"><a href="#candidate-suggestion"><span class="header-section-number">5.5</span> Candidate Suggestion</a></h2>
<p><code>auto-complete-mode</code> analyzes completion operations one by one and reduces overheads of completion as much as possible. For example, having a candidate &quot;foobar&quot; been completed few times, <code>auto-complete-mode</code> arranges it to top of the candidates next time and make a situation that allows users to complete the word with one time TAB or few times TAB. It is called <code>comphist</code> internally, and you can use it by setting <code>ac-use-comphist</code> to <code>t</code>. It is enabled by default. Collection operations data will be stored in <code>user-emacs-directory</code> or <code>~/.emacs.d/</code> with a name <code>ac-comphist.dat</code>.</p>
<p><code>auto-complete-mode</code> collects two types of data to accomplish accurate candidate suggestion.</p>
<ul>
<li>Count of completion</li>
<li>Position of completion</li>
</ul>
<p>Simply saying, it collects not only a completion count but also a position of completion. A completion candidate will be scored with the count and the point. If you complete <code>find-file</code> with a word f few times, in next time <code>find-file</code> will be arranged to top of candidates. However it is too simple. Actually <code>find-file</code> with <code>find-</code> will not have the same score, because a distance between <code>f</code> and <code>find-</code> will reduce a weight of scoring. It means that if you often complete <code>find-library</code> after <code>find-</code>, <code>find-library</code> will get high score than <code>find-file</code> at that position. So <code>auto-complete-mode</code> can guess <code>find-file</code> will be top after <code>f</code> and <code>find-library</code> will be top after <code>find-</code> as it seems to learn from users' operations.</p>
<h2 id="completion-by-dictionary"><a href="#completion-by-dictionary"><span class="header-section-number">5.6</span> Completion by Dictionary</a></h2>
<p>Dictionary is a simple list of string. There is three types of dictionary: user defined dictionary, major mode dictionary, and extension dictionary. You need to add <code>ac-source-dictionary</code> to <code>ac-sources</code> (default). See <a href="#source">Source</a> for more details.</p>
<h3 id="user-defined-dictionary"><a href="#user-defined-dictionary"><span class="header-section-number">5.6.1</span> User Defined Dictionary</a></h3>
<p>User defined dictionary is composed of a list of string specified <code>ac-user-dictionary</code> and dictionary files specified by <code>ac-user-dictionary-files</code>. Dictionary file is a word list separated with newline. User defined dictionary is shared with all buffers. Here is example adding your mail address to dictionary.</p>
<pre><code>(add-to-list &#39;ac-user-dictionary &quot;foobar@example.com&quot;)</code></pre>
<p>Setting will be applied immediately. Try to input &quot;foo&quot; in a buffer. You may see <code>foobar@example.com</code> as a completion candidate. This setting will be cleared if Emacs will quit. You need to write the following code to keep setting in next Emacs launching.</p>
<pre><code>(setq ac-user-dictionary &#39;(&quot;foobar@example.com&quot; &quot;hogehoge@example.com&quot;))</code></pre>
<p>There is more easy way to add word to dictionary. Files specified by <code>ac-user-dictionary-files</code> will be treated as dictionary files. By default, <code>~/.dict</code> will be a dictionary file, so edit <code>~/.dict</code> like:</p>
<pre><code>foobar@example.com
hogehoge@example.com</code></pre>
<p>As we said, words are separated with newline. They are not applied immediately, because <code>auto-complete-mode</code> uses cache not to load every time from a dictionary file. It may be high cost. To clear cache, do <code>M-x ac-clear-dictionary-cache</code>. After that, dictionary files will be load absolutely.</p>
<p>No need to say perhaps, you can use other files as dictionary file by adding to <code>ac-user-dictionary-files</code>.</p>
<h3 id="major-mode-dictionary-and-extension-dictionary"><a href="#major-mode-dictionary-and-extension-dictionary"><span class="header-section-number">5.6.2</span> Major Mode Dictionary and Extension Dictionary</a></h3>
<p>You can use other dictionaries for every major-modes and extensions. A dictionary will loaded from a directory specified with <code>ac-dictionary-directories</code>. <code>ac-dictionary-directories</code> may be the following setting if you followed <a href="#installation">Installation</a> instructions.</p>
<pre><code>(add-to-list &#39;ac-dictionary-directories &quot;~/.emacs.d/ac-dict&quot;)</code></pre>
<p>A dictionary named <code>c++-mode</code> for specific major-mode and a dictionary named <code>txt</code> for specific extension will be stored in the directory. For instance, you complete in a buffer named <code>a.cpp</code> with dictionary completion, following the setting above, <code>~/.emacs.d/ac-dict/c++-mode</code> and <code>~/.emacs.d/ac-dict/cpp</code> will be loaded as dictionary file. You can edit the dictionary files and make a new one. In addition, you can add a new dictionary file to a directory that has same configuration.</p>
<p>As same as user defined dictionary, after editing and adding dictionary, you should do <code>M-x ac-clear-dictionary-cache</code> to apply changes.</p>
<h1 id="source"><a href="#source"><span class="header-section-number">6</span> Source</a></h1>
<p><em>Source</em> is a concept that ensures the extensibility of <code>auto-complete-mode</code>. Simply saying, source is a description of:</p>
<ul>
<li>How to generate completion candidates</li>
<li>How to complete</li>
<li>How to show</li>
</ul>
<p>Anybody who knows a little Emacs Lisp can define a source easily. See <a href="#extend">Extend</a> for how to define a source. Here we will explain how to use built-in sources.</p>
<p>Usually a source name starts with <code>ac-source-</code>. So you can list sources with <code>apropos</code> (<code>M-x apropos RET ^ac-source-</code>). You may see <code>ac-source-filename</code> and <code>ac-source-dictionary</code> which are entities of sources.</p>
<h2 id="using-source"><a href="#using-source"><span class="header-section-number">6.1</span> Using Source</a></h2>
<p>If you wrote <code>(ac-config-default)</code> in your <code>.emacs</code>, it is rare to change a source setting because it is already optimized to use. Here is a short explanation about source however. Sources will be used by setting <code>ac-sources</code> to a list of sources. You can see the setting by evaluating <code>ac-sources</code> in *scratch* buffer:</p>
<pre><code>;; Formatted
(ac-source-filename
 ac-source-functions
 ac-source-yasnippet
 ac-source-variables
 ac-source-symbols
 ac-source-features
 ac-source-abbrev
 ac-source-words-in-same-mode-buffers
 ac-source-dictionary)</code></pre>
<p>As you see, <code>ac-sources</code> in *scratch* buffer has six sources. We explain each source for detail, you can guess meanings of sources. It is worth to remember that <code>ac-sources</code> is a buffer local variable, which means each <code>ac-sources</code> for buffers will be different.</p>
<p>Here is an example. Imagine you are at the *scratch* buffer. As we said, this buffer has many sources. Some people think there are too many. So try to change <code>ac-sources</code> to reduce functionality. It is easy to change. Just evaluate the following code in the *scratch* buffer or with <code>M-:</code>:</p>
<pre><code>(setq ac-sources &#39;(ac-source-symbols ac-source-words-in-same-mode-buffers))</code></pre>
<p>This example changes <code>ac-source</code> setting and enable only symbol completion and word completion among same major modes. Then, how can we enable this setting in next Emacs launching? We can change settings by adding a hook which is called when *scratch* buffer is created.</p>
<pre><code>(defun my-ac-emacs-lisp-mode ()
  (setq ac-sources &#39;(ac-source-symbols ac-source-words-in-same-mode-buffers)))

(add-hook &#39;emacs-lisp-mode-hook &#39;my-ac-emacs-lisp-mode)</code></pre>
<p>If the code <code>(ac-config-default)</code> is written in <code>.emacs</code>, the code above may not work correctly. This is because <code>(ac-config-default)</code> will overwrite the setting. In such case, you can redefine a function which is used in <code>(ac-config-default)</code>. The function name is <code>ac-emacs-lisp-mode-setup</code> in <code>emacs-lisp-mode</code>. See <code>auto-complete-config.el</code> for more details.</p>
<pre><code>(defun ac-emacs-lisp-mode-setup ()
  (setq ac-sources &#39;(ac-source-symbols ac-source-words-in-same-mode-buffers)))</code></pre>
<p>So, now you know how to change sources in a specific major mode. Summary is:</p>
<ol style="list-style-type: decimal">
<li>Define a function changing <code>ac-sources</code></li>
<li>Register the function to proper mode hooks (<code>c++-mode-hook</code>, <code>ruby-mode-hook</code>, and <code>python-mode-hook</code>, etc)</li>
</ol>
<p>By the way, how can we change a setting for all buffers? We use <code>setq-default</code> to change <code>ac-sources</code> instead of <code>setq</code> in such case. Then the default value of <code>ac-sources</code> will be changed to the value you specified.</p>
<pre><code>(setq-default ac-sources &#39;(ac-source-words-in-all-buffer))</code></pre>
<p>There are other ways to do that. <code>(ac-config-default)</code> changes the default value of <code>ac-sources</code> by registering a hook for <code>auto-complete-mode</code>. The registered function is <code>ac-common-setup</code> that adds <code>ac-source-filename</code> to the first of <code>ac-sources</code> by default. So all <code>auto-complete-mode</code> enabled buffer will have <code>ac-source-filename</code> at the first of <code>ac-sources</code>. A reason why adding to the first is relating to <a href="#omni-completion">Omni Completion</a>. Anyway you don't care about it here. So if you want to change <code>ac-sources</code> of all buffer, you can redefine <code>ac-common-setup</code> function to do that.</p>
<pre><code>;; Add ac-source-dictionary to ac-sources of all buffer
(defun ac-common-setup ()
  (setq ac-sources (append ac-sources &#39;(ac-source-dictionary))))</code></pre>
<h2 id="builtin-sources"><a href="#builtin-sources"><span class="header-section-number">6.2</span> Builtin Sources</a></h2>
<p>Here are defined sources in <code>auto-complete.el</code> and <code>auto-complete-config.el</code>.</p>
<h3 id="ac-source-abbrev"><a href="#ac-source-abbrev"><span class="header-section-number">6.2.1</span> <code>ac-source-abbrev</code></a></h3>
<p>A source for Emacs abbreviation function. See <code>info emacs Abbrevs</code> about abbreviation function.</p>
<h3 id="ac-source-css-property"><a href="#ac-source-css-property"><span class="header-section-number">6.2.2</span> <code>ac-source-css-property</code></a></h3>
<p>A source for CSS property.</p>
<h3 id="ac-source-dictionary"><a href="#ac-source-dictionary"><span class="header-section-number">6.2.3</span> <code>ac-source-dictionary</code></a></h3>
<p>A source for dictionary. See <a href="#completion-by-dictionary">Completion by Dictionary</a> about dictionary.</p>
<h3 id="ac-source-eclim"><a href="#ac-source-eclim"><span class="header-section-number">6.2.4</span> <code>ac-source-eclim</code></a></h3>
<p>A source for <a href="http://github.com/senny/emacs-eclim">Emacs-eclim</a>.</p>
<h3 id="ac-source-features"><a href="#ac-source-features"><span class="header-section-number">6.2.5</span> <code>ac-source-features</code></a></h3>
<p>A source for completing features which are available with <code>(require '</code>.</p>
<h3 id="ac-source-filename"><a href="#ac-source-filename"><span class="header-section-number">6.2.6</span> <code>ac-source-filename</code></a></h3>
<p>A source for completing file name. Completion will be started after inserting <code>/</code>.</p>
<h3 id="ac-source-files-in-current-dir"><a href="#ac-source-files-in-current-dir"><span class="header-section-number">6.2.7</span> <code>ac-source-files-in-current-dir</code></a></h3>
<p>A source for completing files in a current directory. It may be useful with <code>eshell</code>.</p>
<h3 id="ac-source-functions"><a href="#ac-source-functions"><span class="header-section-number">6.2.8</span> <code>ac-source-functions</code></a></h3>
<p>A source for completing Emacs Lisp functions. It is available only after <code>(</code>.</p>
<h3 id="ac-source-ghc-mod"><a href="#ac-source-ghc-mod"><span class="header-section-number">6.2.9</span> <code>ac-source-ghc-mod</code></a></h3>
<p>A source for <a href="http://www.mew.org/~kazu/proj/ghc-mod/en/">ghc-mod</a>.</p>
<h3 id="ac-source-gtags"><a href="#ac-source-gtags"><span class="header-section-number">6.2.10</span> <code>ac-source-gtags</code></a></h3>
<p>A source for completing tags of <a href="http://www.tamacom.com/global.html">Global</a>.</p>
<h3 id="ac-source-imenu"><a href="#ac-source-imenu"><span class="header-section-number">6.2.11</span> <code>ac-source-imenu</code></a></h3>
<p>A source for completing <code>imenu</code> nodes. See <code>info emacs imenu</code> for details.</p>
<h3 id="ac-source-semantic"><a href="#ac-source-semantic"><span class="header-section-number">6.2.12</span> <code>ac-source-semantic</code></a></h3>
<p>A source for <a href="http://cedet.sourceforge.net/semantic.shtml">Semantic</a>. It can be used for completing member name for C/C++.</p>
<h3 id="ac-source-slime"><a href="#ac-source-slime"><span class="header-section-number">6.2.13</span> <code>ac-source-slime</code></a></h3>
<p>A source for <a href="http://common-lisp.net/project/slime/">SLIME</a>.</p>
<h3 id="ac-source-semantic-raw"><a href="#ac-source-semantic-raw"><span class="header-section-number">6.2.14</span> <code>ac-source-semantic-raw</code></a></h3>
<p>Unlike <code>ac-source-semantic</code>, this source is for completing symbols in a raw namespace.</p>
<h3 id="ac-source-symbols"><a href="#ac-source-symbols"><span class="header-section-number">6.2.15</span> <code>ac-source-symbols</code></a></h3>
<p>A source for completing Emacs Lisp symbols.</p>
<h3 id="ac-source-variables"><a href="#ac-source-variables"><span class="header-section-number">6.2.16</span> <code>ac-source-variables</code></a></h3>
<p>A source for completing Emacs Lisp symbols.</p>
<h3 id="ac-source-words-in-all-buffer"><a href="#ac-source-words-in-all-buffer"><span class="header-section-number">6.2.17</span> <code>ac-source-words-in-all-buffer</code></a></h3>
<p>A source for completing words in all buffer. Unlikely <a href="#ac-source-words-in-same-mode-buffers"><code>ac-source-words-in-same-mode-buffers</code></a>, it doesn't regard major-mode.</p>
<h3 id="ac-source-words-in-buffer"><a href="#ac-source-words-in-buffer"><span class="header-section-number">6.2.18</span> <code>ac-source-words-in-buffer</code></a></h3>
<p>A source for completing words in a current buffer.</p>
<h3 id="ac-source-words-in-same-mode-buffers"><a href="#ac-source-words-in-same-mode-buffers"><span class="header-section-number">6.2.19</span> <code>ac-source-words-in-same-mode-buffers</code></a></h3>
<p>A source for completing words which are collected over buffers whom major-mode is same to of a current buffer. For example, words will shared among <code>a.cpp</code> and <code>b.cpp</code>, but not shared among <code>a.pl</code> and <code>b.cpp</code> because they are different major-mode buffers. Usually this source is more useful than <a href="#"><code>ac-source-words-in-all-buffer</code></a>.</p>
<h3 id="ac-source-yasnippet"><a href="#ac-source-yasnippet"><span class="header-section-number">6.2.20</span> <code>ac-source-yasnippet</code></a></h3>
<p>A source for <a href="http://code.google.com/p/yasnippet/">Yasnippet</a> to complete and expand snippets.</p>
<h1 id="tips"><a href="#tips"><span class="header-section-number">7</span> Tips</a></h1>
<h2 id="not-to-complete-automatically"><a href="#not-to-complete-automatically"><span class="header-section-number">7.1</span> Not to complete automatically</a></h2>
<p>If you are being annoyed with displaying completion menu, you can disable automatic starting completion by setting <code>ac-auto-start</code> to <code>nil</code>.</p>
<pre><code>(setq ac-auto-start nil)</code></pre>
<p>You need to bind some key to <code>auto-complete</code> command (because you need to complete anyway). For example, bind to <code>ac-mode-map</code>, which is a key map for <code>auto-complete-mode</code> enabled buffer:</p>
<pre><code>(define-key ac-mode-map (kbd &quot;M-TAB&quot;) &#39;auto-complete)</code></pre>
<p>Or bind to global key map.</p>
<pre><code>(global-set-key &quot;\M-/&quot; &#39;auto-complete)</code></pre>
<p>In addition, if you allow to start completion automatically but also want to be silent as much as possible, you can do it by setting <code>ac-auto-start</code> to an prefix length integer. For example, if you want to start completion automatically when you has inserted 4 or more characters, just set <code>ac-auto-start</code> to 4:</p>
<pre><code>(setq ac-auto-start 4)</code></pre>
<p>Setting <code>ac-auto-start</code> to large number will result in good for performance. Lesser <code>ac-auto-start</code>, more high cost to produce completion candidates, because there will be so many candidates necessarily. If you feel <code>auto-complete-mode</code> is stalling, change <code>ac-auto-start</code> to a larger number or <code>nil</code>.</p>
<p>See <a href="#ac-auto-start"><code>ac-auto-start</code></a> for more details.</p>
<p>And consider to use <a href="#trigger-key">Trigger Key</a>.</p>
<h2 id="not-to-show-completion-menu-automatically"><a href="#not-to-show-completion-menu-automatically"><span class="header-section-number">7.2</span> Not to show completion menu automatically</a></h2>
<p>There is another approach to solve the annoying problem is that not to show completion menu automatically. Not to show completion menu automatically, set <a href="#ac-auto-show-menu"><code>ac-auto-show-menu</code></a> to <code>nil</code>.</p>
<pre><code>(setq ac-auto-show-menu nil)</code></pre>
<p>When you select or filter candidates, completion menu will be shown.</p>
<p>In other way, you can delay showing completion menu by setting <code>ac-auto-show-menu</code> to seconds in real number.</p>
<pre><code>;; Show 0.8 second later
(setq ac-auto-show-menu 0.8)</code></pre>
<p>This interface has both good points of completely automatic completion and completely non-automatic completion. This may be default in the future.</p>
<h2 id="stop-completion"><a href="#stop-completion"><span class="header-section-number">7.3</span> Stop completion</a></h2>
<p>You can stop completion by pressing <code>C-g</code>. However you won't press <code>C-g</code> while defining a macro. In such case, it is a good idea to bind some key to <code>ac-completing-map</code>.</p>
<pre><code>(define-key ac-completing-map &quot;\M-/&quot; &#39;ac-stop)</code></pre>
<p>Now you can stop completion by pressing <code>M-/</code>.</p>
<h2 id="finish-completion-by-tab"><a href="#finish-completion-by-tab"><span class="header-section-number">7.4</span> Finish completion by TAB</a></h2>
<p>As we described above, there is many behaviors in TAB. You need to use TAB and RET properly, but there is a simple interface that bind RET to original and TAB to finish completion:</p>
<pre><code>(define-key ac-completing-map &quot;\t&quot; &#39;ac-complete)
(define-key ac-completing-map &quot;\r&quot; nil)</code></pre>
<h2 id="select-candidates-with-c-nc-p-only-when-completion-menu-is-displayed"><a href="#select-candidates-with-c-nc-p-only-when-completion-menu-is-displayed"><span class="header-section-number">7.5</span> Select candidates with C-n/C-p only when completion menu is displayed</a></h2>
<p>By evaluating the following code, you can select candidates with C-n/C-p, but it might be annoying sometimes.</p>
<pre><code>;; Bad config
(define-key ac-completing-map &quot;\C-n&quot; &#39;ac-next)
(define-key ac-completing-map &quot;\C-p&quot; &#39;ac-previous)</code></pre>
<p>In this case, it is better that selecting candidates is enabled only when completion menu is displayed so that the key input will not be taken as much as possible. <code>ac-menu-map</code> is a keymap for completion on completion menu which is enabled when <code>ac-use-menu-map</code> is <code>t</code>.</p>
<pre><code>(setq ac-use-menu-map t)
;; Default settings
(define-key ac-menu-map &quot;\C-n&quot; &#39;ac-next)
(define-key ac-menu-map &quot;\C-p&quot; &#39;ac-previous)</code></pre>
<p>See <a href="#ac-use-menu-map"><code>ac-use-menu-map</code></a> and <a href="#ac-menu-map"><code>ac-menu-map</code></a> for more details.</p>
<h2 id="not-to-use-quick-help"><a href="#not-to-use-quick-help"><span class="header-section-number">7.6</span> Not to use quick help</a></h2>
<p>A tooltip help that is shown when completing is called quick help. You can disable it if you don't want to use it:</p>
<pre><code>(setq ac-use-quick-help nil)</code></pre>
<h2 id="change-a-height-of-completion-menu"><a href="#change-a-height-of-completion-menu"><span class="header-section-number">7.7</span> Change a height of completion menu</a></h2>
<p>Set <code>ac-menu-height</code> to number of lines.</p>
<pre><code>;; 20 lines
(setq ac-menu-height 20)</code></pre>
<h2 id="enable-auto-complete-mode-automatically-for-specific-modes"><a href="#enable-auto-complete-mode-automatically-for-specific-modes"><span class="header-section-number">7.8</span> Enable <code>auto-complete-mode</code> automatically for specific modes</a></h2>
<p><code>auto-complete-mode</code> won't be enabled automatically for modes that are not in <code>ac-modes</code>. So you need to set if necessary:</p>
<pre><code>(add-to-list &#39;ac-modes &#39;brandnew-mode)</code></pre>
<h2 id="ignore-case"><a href="#ignore-case"><span class="header-section-number">7.9</span> Ignore case</a></h2>
<p>There is three ways to distinguish upper case and lower case.</p>
<pre><code>;; Just ignore case
(setq ac-ignore-case t)
;; Ignore case if completion target string doesn&#39;t include upper characters
(setq ac-ignore-case &#39;smart)
;; Distinguish case
(setq ac-ignore-case nil)</code></pre>
<p>Default is <code>smart</code>.</p>
<h2 id="stop-completion-automatically-after-inserting-specific-words"><a href="#stop-completion-automatically-after-inserting-specific-words"><span class="header-section-number">7.10</span> Stop completion automatically after inserting specific words</a></h2>
<p>Set <code>ac-stop-words</code> to words that stops completion automatically. In ruby, some people want to stop completion automatically after inserting &quot;end&quot;:</p>
<pre><code>(add-hook &#39;ruby-mode-hook
          (lambda ()
            (make-local-variable &#39;ac-stop-words)
            (add-to-list &#39;ac-stop-words &quot;end&quot;)))</code></pre>
<p>Note that <code>ac-stop-words</code> is not a buffer local variable, so you need to make it buffer local with <code>make-local-variable</code> if it is buffer specific setting.</p>
<h2 id="change-colors"><a href="#change-colors"><span class="header-section-number">7.11</span> Change colors</a></h2>
<p>Colors settings are following:</p>
<table>
<thead>
<tr class="header">
<th align="left">Face</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>ac-completion-face</code></td>
<td align="left">Foreground color of inline completion</td>
</tr>
<tr class="even">
<td align="left"><code>ac-candidate-face</code></td>
<td align="left">Color of completion menu</td>
</tr>
<tr class="odd">
<td align="left"><code>ac-selection-face</code></td>
<td align="left">Selection color of completion menu</td>
</tr>
</tbody>
</table>
<p>To change face background color, use <code>set-face-background</code>. To change face foreground color, use <code>set-face-foreground</code>. To set underline, use <code>set-face-underline</code>.</p>
<pre><code>;; Examples
(set-face-background &#39;ac-candidate-face &quot;lightgray&quot;)
(set-face-underline &#39;ac-candidate-face &quot;darkgray&quot;)
(set-face-background &#39;ac-selection-face &quot;steelblue&quot;)</code></pre>
<h2 id="change-default-sources"><a href="#change-default-sources"><span class="header-section-number">7.12</span> Change default sources</a></h2>
<p>Read <a href="#source">Source</a> first if you don't familiar with sources. To change default of sources, use <code>setq-default</code>:</p>
<pre><code>(setq-default ac-sources &#39;(ac-source-words-in-all-buffer))</code></pre>
<h2 id="change-sources-for-specific-major-modes"><a href="#change-sources-for-specific-major-modes"><span class="header-section-number">7.13</span> Change sources for specific major modes</a></h2>
<p>For example, you may want to use specific sources for C++ buffers. To do that, register a hook by <code>add-hook</code> and change <code>ac-sources</code> properly:</p>
<pre><code>(add-hook &#39;c++-mode (lambda () (add-to-list &#39;ac-sources &#39;ac-source-semantic)))</code></pre>
<h2 id="completion-with-specific-source"><a href="#completion-with-specific-source"><span class="header-section-number">7.14</span> Completion with specific source</a></h2>
<p>You can start completion with specific source. For example, if you want to complete file name, do <code>M-x ac-complete-filename</code> at point. Or if you want to complete C/C++ member name, do <code>M-x ac-complete-semantic</code> at point. Usually, you may bind them to some key like:</p>
<pre><code>;; Complete member name by C-c . for C++ mode.
(add-hook &#39;c++-mode-hook
          (lambda ()
            (local-set-key (kbd &quot;C-c .&quot;) &#39;ac-complete-semantic)))
;; Complete file name by C-c /
(global-set-key (kbd &quot;C-c /&quot;) &#39;ac-complete-filename)</code></pre>
<p>Generally, such commands will be automatically available when sources are defined. Assume that a source named <code>ac-source-foobar</code> is being defined for example, a command called <code>ac-complete-foobar</code> will be also defined automatically. See also <a href="#builtin-sources">Builtin Sources</a> for available commands.</p>
<p>If you want to use multiple sources for a command, you need to define a command for it like:</p>
<pre><code>(defun semantic-and-gtags-complete ()
  (interactive)
  (auto-complete &#39;(ac-source-semantic ac-source-gtags)))</code></pre>
<p><code>auto-complete</code> function can take an alternative of <code>ac-sources</code>.</p>
<h2 id="show-help-persistently"><a href="#show-help-persistently"><span class="header-section-number">7.15</span> Show help persistently</a></h2>
<p>Use <code>ac-persist-help</code> instead of <code>ac-help</code>, which is bound to <code>M-&lt;f1&gt;</code> and <code>C-M-?</code>.</p>
<h2 id="show-a-lastly-completed-candidate-help"><a href="#show-a-lastly-completed-candidate-help"><span class="header-section-number">7.16</span> Show a lastly completed candidate help</a></h2>
<p><code>ac-last-help</code> command shows a lastly completed candidate help in a <code>ac-help</code> (buffer help) form. If you give an argument by <code>C-u</code> or just call <code>ac-last-persist-help</code>, its help buffer will not disappear automatically.</p>
<p><code>ac-last-quick-help</code> command show a lastly completed candidate help in a <code>ac-quick-help</code> (quick help) form. It is useful if you want to see a function documentation, for example.</p>
<p>You may bind keys to these command like:</p>
<pre><code>(define-key ac-mode-map (kbd &quot;C-c h&quot;) &#39;ac-last-quick-help)
(define-key ac-mode-map (kbd &quot;C-c H&quot;) &#39;ac-last-help)</code></pre>
<h2 id="show-help-beautifully"><a href="#show-help-beautifully"><span class="header-section-number">7.17</span> Show help beautifully</a></h2>
<p>If <a href="http://www.emacswiki.org/emacs-en/PosTip">pos-tip.el</a> is installed, <code>auto-complete-mode</code> uses its native rendering engine for displaying quick help instead of legacy one.</p>
<h1 id="third-party-extensions"><a href="#third-party-extensions"><span class="header-section-number">8</span> Third-party Extensions</a></h1>
<h2 id="slime"><a href="#slime"><span class="header-section-number">8.1</span> SLIME</a></h2>
<p>See <a href="https://github.com/purcell/ac-slime">ac-slime</a> page.</p>
<h2 id="scala"><a href="#scala"><span class="header-section-number">8.2</span> Scala</a></h2>
<p>See <a href="https://github.com/aemoncannon/ensime">ENSIME</a> page.</p>
<h1 id="configuration"><a href="#configuration"><span class="header-section-number">9</span> Configuration</a></h1>
<p>Any configuration item will be set in <code>.emacs</code> or with <code>M-x customize-group RET auto-complete RET</code>.</p>
<h2 id="ac-delay"><a href="#ac-delay"><span class="header-section-number">9.1</span> <code>ac-delay</code></a></h2>
<p>Delay time to start completion in real number seconds. It is a trade-off of responsiveness and performance.</p>
<h2 id="ac-auto-show-menu"><a href="#ac-auto-show-menu"><span class="header-section-number">9.2</span> <code>ac-auto-show-menu</code></a></h2>
<p>Show completion menu automatically if <code>t</code> specified. <code>t</code> means always automatically showing completion menu. <code>nil</code> means never showing completion menu. Real number means delay time in seconds.</p>
<h2 id="ac-show-menu-immediately-on-auto-complete"><a href="#ac-show-menu-immediately-on-auto-complete"><span class="header-section-number">9.3</span> <code>ac-show-menu-immediately-on-auto-complete</code></a></h2>
<p>Whether or not to show completion menu immediately on <code>auto-complete</code> command. If inline completion has already been showed, this configuration will be ignored.</p>
<h2 id="ac-expand-on-auto-complete"><a href="#ac-expand-on-auto-complete"><span class="header-section-number">9.4</span> <code>ac-expand-on-auto-complete</code></a></h2>
<p>Whether or not to expand a common part of whole candidates.</p>
<h2 id="ac-disable-faces"><a href="#ac-disable-faces"><span class="header-section-number">9.5</span> <code>ac-disable-faces</code></a></h2>
<p>Specify a list of face symbols for disabling auto completion. Auto completion will not be started if a face text property at a point is included in the list.</p>
<h2 id="ac-stop-flymake-on-completing"><a href="#ac-stop-flymake-on-completing"><span class="header-section-number">9.6</span> <code>ac-stop-flymake-on-completing</code></a></h2>
<p>Whether or not to stop Flymake on completion.</p>
<h2 id="ac-use-fuzzy"><a href="#ac-use-fuzzy"><span class="header-section-number">9.7</span> <code>ac-use-fuzzy</code></a></h2>
<p>Whether or not to use <a href="#Completion_by_Fuzzy_Matching">fuzzy matching</a>.</p>
<h2 id="ac-fuzzy-cursor-color"><a href="#ac-fuzzy-cursor-color"><span class="header-section-number">9.8</span> <code>ac-fuzzy-cursor-color</code></a></h2>
<p>Change cursor color to specified color when <a href="#completion-by-fuzzy-matching">Completion by Fuzzy Matching</a> is started. <code>nil</code> means never changed. Available colors can be seen with <code>M-x list-colors-display</code>.</p>
<h2 id="ac-use-comphist"><a href="#ac-use-comphist"><span class="header-section-number">9.9</span> <code>ac-use-comphist</code></a></h2>
<p>Whether or not to use <a href="#candidate-suggestion">Candidate Suggestion</a>. <code>nil</code> means never using it and get performance better maybe.</p>
<h2 id="ac-comphist-threshold"><a href="#ac-comphist-threshold"><span class="header-section-number">9.10</span> <code>ac-comphist-threshold</code></a></h2>
<p>Specify a percentage of limiting lower scored candidates. 100% for whole scores.</p>
<h2 id="ac-comphist-file"><a href="#ac-comphist-file"><span class="header-section-number">9.11</span> <code>ac-comphist-file</code></a></h2>
<p>Specify a file stores data of <a href="#candidate-suggestion">Candidate Suggestion</a>.</p>
<h2 id="ac-use-quick-help"><a href="#ac-use-quick-help"><span class="header-section-number">9.12</span> <code>ac-use-quick-help</code></a></h2>
<p>Whether or not to use quick help.</p>
<h2 id="ac-quick-help-delay"><a href="#ac-quick-help-delay"><span class="header-section-number">9.13</span> <code>ac-quick-help-delay</code></a></h2>
<p>Delay time to show quick help in real number seconds.</p>
<h2 id="ac-menu-height"><a href="#ac-menu-height"><span class="header-section-number">9.14</span> <code>ac-menu-height</code></a></h2>
<p>Specify an integer of lines of completion menu.</p>
<h2 id="ac-quick-help-height"><a href="#ac-quick-help-height"><span class="header-section-number">9.15</span> <code>ac-quick-help-height</code></a></h2>
<p>Specify an integer of lines of quick help.</p>
<h2 id="ac-quick-help-prefer-pos-tip"><a href="#ac-quick-help-prefer-pos-tip"><span class="header-section-number">9.16</span> <code>ac-quick-help-prefer-pos-tip</code></a></h2>
<p>Whether or not auto-complete prefers native tooltip with pos-tip than overlap popup for displaying quick help. If non-nil, you also need to install <a href="http://www.emacswiki.org/emacs/PosTip">pos-tip.el</a> so that displaying tooltip can work well.</p>
<h2 id="ac-candidate-limit"><a href="#ac-candidate-limit"><span class="header-section-number">9.17</span> <code>ac-candidate-limit</code></a></h2>
<p>Limit a number of candidates. Specifying an integer, the value will be a limit of candidates. <code>nil</code> means no limit.</p>
<h2 id="ac-modes"><a href="#ac-modes"><span class="header-section-number">9.18</span> <code>ac-modes</code></a></h2>
<p>Specify major modes as a list of symbols that will be enabled automatically if <code>global-auto-complete-mode</code> is enabled.</p>
<h2 id="ac-compatible-packages-regexp"><a href="#ac-compatible-packages-regexp"><span class="header-section-number">9.19</span> <code>ac-compatible-packages-regexp</code></a></h2>
<p>Specify a regexp that identifies starting completion or not for that package.</p>
<h2 id="ac-non-trigger-commands"><a href="#ac-non-trigger-commands"><span class="header-section-number">9.20</span> <code>ac-non-trigger-commands</code></a></h2>
<p>Specify commands as a list of symbols that does NOT starts completion automatically.</p>
<h2 id="ac-trigger-commands"><a href="#ac-trigger-commands"><span class="header-section-number">9.21</span> <code>ac-trigger-commands</code></a></h2>
<p>Specify commands as a list of symbols that starts completion automatically. <code>self-insert-command</code> is one of default.</p>
<h2 id="ac-trigger-commands-on-completing"><a href="#ac-trigger-commands-on-completing"><span class="header-section-number">9.22</span> <code>ac-trigger-commands-on-completing</code></a></h2>
<p>Same as <a href="#ac-trigger-commands"><code>ac-trigger-commands</code></a> expect this will be used on completing.</p>
<h2 id="ac-trigger-key"><a href="#ac-trigger-key"><span class="header-section-number">9.23</span> <code>ac-trigger-key</code></a></h2>
<p>Specify a <a href="#trigger-key">Trigger Key</a>.</p>
<h2 id="ac-auto-start"><a href="#ac-auto-start"><span class="header-section-number">9.24</span> <code>ac-auto-start</code></a></h2>
<p>Specify how completion will be started. <code>t</code> means always starting completion automatically. <code>nil</code> means never started automatically. An integer means completion will not be started until the value is more than a length of the completion target string.</p>
<h2 id="ac-stop-words"><a href="#ac-stop-words"><span class="header-section-number">9.25</span> <code>ac-stop-words</code></a></h2>
<p>Specify a list of strings that stops completion.</p>
<h2 id="ac-use-dictionary-as-stop-words"><a href="#ac-use-dictionary-as-stop-words"><span class="header-section-number">9.26</span> <code>ac-use-dictionary-as-stop-words</code></a></h2>
<p>Specify whether auto-complete uses dictionaries as stop words.</p>
<h2 id="ac-ignore-case"><a href="#ac-ignore-case"><span class="header-section-number">9.27</span> <code>ac-ignore-case</code></a></h2>
<p>Specify how distinguish case. <code>t</code> means always ignoring case. <code>nil</code> means never ignoring case. <code>smart</code> in symbol means ignoring case only when the completion target string doesn't include upper characters.</p>
<h2 id="ac-dwim"><a href="#ac-dwim"><span class="header-section-number">9.28</span> <code>ac-dwim</code></a></h2>
<p>&quot;Do What I Mean&quot; function. <code>t</code> means:</p>
<ul>
<li>After selecting candidates, TAB will behave as RET</li>
<li>TAB will behave as RET only on candidate remains</li>
</ul>
<h2 id="ac-use-menu-map"><a href="#ac-use-menu-map"><span class="header-section-number">9.29</span> <code>ac-use-menu-map</code></a></h2>
<p>Specify a special keymap (<code>ac-menu-map</code>) should be enabled when completion menu is displayed. <code>ac-menu-map</code> will be enabled when it is <code>t</code> and satisfy one of the following conditions:</p>
<ul>
<li><code>ac-auto-start</code> and <code>ac-auto-show-menu</code> are not <code>nil</code>, and completion menu is displayed after starting completion</li>
<li>Completion menu is displayed by <code>auto-complete</code> command</li>
<li>Completion menu is displayed by <code>ac-isearch</code> command</li>
</ul>
<h2 id="ac-use-overriding-local-map"><a href="#ac-use-overriding-local-map"><span class="header-section-number">9.30</span> <code>ac-use-overriding-local-map</code></a></h2>
<p>Use only when operations is not affected. Internally it uses <code>overriding-local-map</code>, which is too powerful to use with keeping orthogonality. So don't use as much as possible.</p>
<h2 id="ac-completion-face"><a href="#ac-completion-face"><span class="header-section-number">9.31</span> <code>ac-completion-face</code></a></h2>
<p>Face of inline completion.</p>
<h2 id="ac-candidate-face"><a href="#ac-candidate-face"><span class="header-section-number">9.32</span> <code>ac-candidate-face</code></a></h2>
<p>Face of completion menu background.</p>
<h2 id="ac-selection-face"><a href="#ac-selection-face"><span class="header-section-number">9.33</span> <code>ac-selection-face</code></a></h2>
<p>Face of completion menu selection.</p>
<h2 id="global-auto-complete-mode"><a href="#global-auto-complete-mode"><span class="header-section-number">9.34</span> <code>global-auto-complete-mode</code></a></h2>
<p>Whether or not to use <code>auto-complete-mode</code> globally. It is <code>t</code> in general.</p>
<h2 id="ac-user-dictionary"><a href="#ac-user-dictionary"><span class="header-section-number">9.35</span> <code>ac-user-dictionary</code></a></h2>
<p>Specify a dictionary as a list of string for <a href="#completion-by-dictionary">Completion by Dictionary</a>.</p>
<h2 id="ac-user-dictionary-files"><a href="#ac-user-dictionary-files"><span class="header-section-number">9.36</span> <code>ac-user-dictionary-files</code></a></h2>
<p>Specify a dictionary files as a list of string for <a href="#completion-by-dictionary">Completion by Dictionary</a>.</p>
<h2 id="ac-dictionary-directories"><a href="#ac-dictionary-directories"><span class="header-section-number">9.37</span> <code>ac-dictionary-directories</code></a></h2>
<p>Specify a dictionary directories as a list of string for <a href="#completion-by-dictionary">Completion by Dictionary</a>.</p>
<h2 id="ac-sources"><a href="#ac-sources"><span class="header-section-number">9.38</span> <code>ac-sources</code></a></h2>
<p>Specify sources as a list of <a href="#source">Source</a>. This is a buffer local variable.</p>
<h2 id="ac-completing-map"><a href="#ac-completing-map"><span class="header-section-number">9.39</span> <code>ac-completing-map</code></a></h2>
<p>Keymap for completion.</p>
<h2 id="ac-menu-map"><a href="#ac-menu-map"><span class="header-section-number">9.40</span> <code>ac-menu-map</code></a></h2>
<p>Keymap for completion on completion menu. See also <a href="#ac-use-menu-map"><code>ac-use-menu-map</code></a>.</p>
<h2 id="ac-mode-map"><a href="#ac-mode-map"><span class="header-section-number">9.41</span> <code>ac-mode-map</code></a></h2>
<p>Keymap for <code>auto-complete-mode</code> enabled buffers.</p>
<h1 id="extend"><a href="#extend"><span class="header-section-number">10</span> Extend</a></h1>
<p>A meaning to extend <code>auto-complete-mode</code> is just defining a <a href="#source">Source</a>. This section describe how to define a source.</p>
<h2 id="prototype"><a href="#prototype"><span class="header-section-number">10.1</span> Prototype</a></h2>
<p>Source basically takes a form of the following:</p>
<pre><code>(defvar ac-source-mysource1
  &#39;((prop . value)
    ...))</code></pre>
<p>As you see, source is just an associate list. You can define a source by combining pairs of defined property and its value.</p>
<h2 id="example"><a href="#example"><span class="header-section-number">10.2</span> Example</a></h2>
<p>The most important property for source is <a href="#candidates"><code>candidates</code></a> property. This property describes how to generate completion candidates by giving a function, an expression, or a variable. A result of evaluation should be a list of strings. Here is an example to generate candidates &quot;Foo&quot;, &quot;Bar&quot;, and &quot;Baz&quot;:</p>
<pre><code>(defvar ac-source-mysource1
  &#39;((candidates . (list &quot;Foo&quot; &quot;Bar&quot; &quot;Baz&quot;))))</code></pre>
<p>Then add this source to <code>ac-sources</code> and use:</p>
<pre><code>(setq ac-sources &#39;(ac-source-mysource1))</code></pre>
<p>It is successful if you have &quot;Bar&quot; and &quot;Baz&quot; by inserting &quot;B&quot;. The example above has an expression <code>(list ...)</code> in <code>candidates</code> property. The expression specified there will not be byte-compiled, so you should not use an expression unless it is too simple, because it has a bad affection on performance. You should use a function instead maybe:</p>
<pre><code>(defun mysource1-candidates ()
  &#39;(&quot;Foo&quot; &quot;Bar&quot; &quot;Baz&quot;))

(defvar ac-source-mysource1
  &#39;((candidates . mysource1-candidates)))</code></pre>
<p>The function specified in <code>candidates</code> property will be called without any arguments on every time candidates updated. There is another way: a variable.</p>
<h2 id="initialization"><a href="#initialization"><span class="header-section-number">10.3</span> Initialization</a></h2>
<p>You may want to initialize a source at first time to complete. Use <code>init</code> property in these cases. As same as <code>candidates</code> property, specify a function without any parameters or an expression. Here is an example:</p>
<pre><code>(defvar mysource2-cache nil)

(defun mysource2-init ()
  (setq mysource2-cache &#39;(&quot;Huge&quot; &quot;Processing&quot; &quot;Is&quot; &quot;Done&quot; &quot;Here&quot;)))

(defvar ac-source-mysource2
  &#39;((init . mysource2-init)
    (candidates . mysource2-cache)))</code></pre>
<p>In this example, <code>mysource2-init</code> function does huge processing, and stores the result into <code>mysource2-cache</code> variable. Then specifying the variable in <code>candidates</code> property, this source prevents huge processing on every time update completions. There are possible usage:</p>
<ul>
<li>Do <code>require</code></li>
<li>Open buffers first of all</li>
</ul>
<h2 id="cache"><a href="#cache"><span class="header-section-number">10.4</span> Cache</a></h2>
<p>Caching strategy is important for <code>auto-complete-mode</code>. There are two major ways: <code>init</code> property and <code>cache</code> property that is described in this section. Specifying <code>cache</code> property in source definition, a result of evaluation of <code>candidates</code> property will be cached and reused the result as the result of evaluation of <code>candidates</code> property next time.</p>
<p>Rewrite the example in previous section by using <code>cache</code> property.</p>
<pre><code>(defun mysource2-candidates ()
  &#39;(&quot;Huge&quot; &quot;Processing&quot; &quot;Is&quot; &quot;Done&quot; &quot;Here&quot;))

(defvar ac-source-mysource2
  &#39;((candidates . mysource2-candidates)
    (cache)))</code></pre>
<p>There is no performance problem because this source has <code>cache</code> property even if <code>candidates</code> property will do huge processing.</p>
<h3 id="cache-expiration"><a href="#cache-expiration"><span class="header-section-number">10.4.1</span> Cache Expiration</a></h3>
<p>It is possible to keep among more wider scope than <code>init</code> property and <code>cache</code> property. It may be useful for remembering all function names which is rarely changed. In these cases, how can we clear cache property not at the expense of performance? This is true time use that functionality.</p>
<p>Use <code>ac-clear-variable-after-save</code> to clear cache every time a buffer saved. Here is an example:</p>
<pre><code>(defvar mysource3-cache nil)

(ac-clear-variable-after-save &#39;mysource3-cache)

(defun mysource3-candidates ()
  (or mysource3-cache
      (setq mysource3-cache (list (format &quot;Time %s&quot; (current-time-string))))))

(defvar ac-source-mysource3
  &#39;((candidates . mysource3-candidates)))</code></pre>
<p>Add this source to <code>ac-sources</code> and complete with &quot;Time&quot;. You may see a time when completion has been started. After that, you also see the same time, because <code>mysource3-candidates</code> returns the cache as much as possible. Then, save the buffer once and complete with &quot;Time&quot; again. In this time, you may find a new time. An essence of this source is to use <code>ac-clear-variable-after-save</code> to manage a variable for cache.</p>
<p>It is also possible to clear cache periodically. Use <code>ac-clear-variable-every-minute</code> to do that. A way to use is same to <code>ac-clear-variable-after-save</code> except its cache will be cleared every minutes. A builtin source <code>ac-source-functions</code> uses this functionality.</p>
<h2 id="action"><a href="#action"><span class="header-section-number">10.5</span> Action</a></h2>
<p><a href="#completion-by-ret">Completion by RET</a> will evaluate a function or an expression specified in <code>action</code> property. A builtin sources <code>ac-source-abbrev</code> and <code>ac-source-yasnippet</code> use this property.</p>
<h2 id="omni-completion"><a href="#omni-completion"><span class="header-section-number">10.6</span> Omni Completion</a></h2>
<p><em>Omni Completion</em> is a type of completion which regards of a context of editing. A file name completion which completes with slashed detected and a member name completion in C/C++ with dots detected are omni completions. To make a source support for omni completion, use <code>prefix</code> property. A result of evaluation of <code>prefix</code> property must be a beginning point of completion target string. Retuning <code>nil</code> means the source is disabled within the context.</p>
<p>Consider a source that completes mail addresses only after &quot;To: &quot;. First of all, define a mail address completion source as same as above.</p>
<pre><code>(defvar ac-source-to-mailaddr
  &#39;((candidates . (list &quot;foo1@example.com&quot;
                        &quot;foo2@example.com&quot;
                        &quot;foo3@example.com&quot;))))

(setq ac-sources &#39;(ac-source-to-mailaddr))</code></pre>
<p>Then enable completions only after &quot;To: &quot; by using <code>prefix</code> property. <code>prefix</code> property must be one of:</p>
<ul>
<li>Regexp</li>
<li>Function</li>
<li>Expression</li>
</ul>
<p>Specifying a regexp, <code>auto-complete-mode</code> thinks of a point of start of group 1 or group 0 as a beginning point of completion target string by doing <code>re-search-backward</code><sup><a href="#fn1" class="footnoteRef" id="fnref1">1</a></sup> with the regexp. If you want to do more complicated, use a function or an expression instead. The beginning point that is evaluated here will be stored into <a href="#ac-point"><code>ac-point</code></a>. In above example, regexp is enough.</p>
<pre><code>^To: \(.*\)</code></pre>
<p>A reason why capturing group 1 is skipping &quot;To: &quot;. By adding this into the source definition, the source looks like:</p>
<pre><code>(defvar ac-source-to-mailaddr
  &#39;((candidates . (list &quot;foo1@example.com&quot;
                        &quot;foo2@example.com&quot;
                        &quot;foo3@example.com&quot;))
    (prefix . &quot;^To: \\(.*\\)&quot;)))</code></pre>
<p>Add this source to <code>ac-sources</code> and then type &quot;To: &quot;. You will be able to complete mail addresses.</p>
<h2 id="ac-define-source"><a href="#ac-define-source"><span class="header-section-number">10.7</span> <code>ac-define-source</code></a></h2>
<p>You may use an utility macro called <code>ac-define-source</code> which defines a source and a command.</p>
<pre><code>(ac-define-source mysource3
  &#39;((candidates . (list &quot;Foo&quot; &quot;Bar&quot; &quot;Baz&quot;))))</code></pre>
<p>This expression will be expanded like:</p>
<pre><code>(defvar ac-source-mysource3
  &#39;((candidates . (list &quot;Foo&quot; &quot;Bar&quot; &quot;Baz&quot;))))

(defun ac-complete-mysource3 ()
  (interactive)
  (auto-complete &#39;(ac-source-mysource3)))</code></pre>
<p>A source will be defined as usual and in addition a command that completes with the source will be defined. Calling <code>auto-complete</code> without arguments will use <code>ac-sources</code> as default sources and with arguments will use the arguments as default sources. Considering compatibility, it is difficult to answer which you should use <code>defvar</code> and <code>ac-define-source</code>. Builtin sources are defined with <code>ac-define-sources</code>, so you can use them alone by binding some key to these commands such like <code>ac-complete-filename</code>. See also <a href="#completion-with-specific-source">Completion with specific source</a>.</p>
<h3 id="source-properties"><a href="#source-properties"><span class="header-section-number">10.7.1</span> Source Properties</a></h3>
<h4 id="init"><a href="#init"><span class="header-section-number">10.7.1.1</span> <code>init</code></a></h4>
<p>Specify a function or an expression that is evaluated only once when completion is started.</p>
<h4 id="candidates"><a href="#candidates"><span class="header-section-number">10.7.1.2</span> <code>candidates</code></a></h4>
<p>Specify a function, an expression, or a variable to calculate candidates. Candidates should be a list of string. If <a href="#cache-1"><code>cache</code></a> property is enabled, this property will be ignored twice or later.</p>
<h3 id="prefix"><a href="#prefix"><span class="header-section-number">10.7.2</span> <code>prefix</code></a></h3>
<p>Specify a regexp, a function, or an expression to find a point of completion target string for <a href="#omni-completion">Omni Completion</a>. This source will be ignored when <code>nil</code> returned. If a regexp is specified, a start point of group 1 or group 2 will be used as a value.</p>
<h3 id="requires"><a href="#requires"><span class="header-section-number">10.7.3</span> <code>requires</code></a></h3>
<p>Specify a required number of characters of completion target string. If nothing is specified, <code>auto-complete-mode</code> uses <a href="#ac-auto-start"><code>ac-auto-start</code></a> instead.</p>
<h3 id="action-1"><a href="#action-1"><span class="header-section-number">10.7.4</span> <code>action</code></a></h3>
<p>Specify a function or an expression that is executed on <a href="#completion-by-ret">Completion by RET</a>.</p>
<h3 id="limit"><a href="#limit"><span class="header-section-number">10.7.5</span> <code>limit</code></a></h3>
<p>Specify a limit of candidates. It overrides <code>ac-candidate-limit</code> partially.</p>
<h3 id="symbol"><a href="#symbol"><span class="header-section-number">10.7.6</span> <code>symbol</code></a></h3>
<p>Specify a symbol of candidate meaning in one character string. The symbol will be any character, but you should follow the rule:</p>
<table>
<thead>
<tr class="header">
<th align="left">Symbol</th>
<th align="left">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>s</code></td>
<td align="left">Symbol</td>
</tr>
<tr class="even">
<td align="left"><code>f</code></td>
<td align="left">Function, Method</td>
</tr>
<tr class="odd">
<td align="left"><code>v</code></td>
<td align="left">Variable</td>
</tr>
<tr class="even">
<td align="left"><code>c</code></td>
<td align="left">Constant</td>
</tr>
<tr class="odd">
<td align="left"><code>a</code></td>
<td align="left">Abbreviation</td>
</tr>
<tr class="even">
<td align="left"><code>d</code></td>
<td align="left">Dictionary</td>
</tr>
</tbody>
</table>
<h3 id="summary-1"><a href="#summary-1"><span class="header-section-number">10.7.7</span> <code>summary</code></a></h3>
<p>Specify a summary of candidate in string. It should be used for summarizing the candidate in short string.</p>
<h3 id="cache-1"><a href="#cache-1"><span class="header-section-number">10.7.8</span> <code>cache</code></a></h3>
<p>Use <a href="#cache">Cache</a>.</p>
<h3 id="require"><a href="#require"><span class="header-section-number">10.7.9</span> <code>require</code></a></h3>
<p>Specify an integer or <code>nil</code>. This source will be ignored when the integer value is lager than a length of completion target string. <code>nil</code> means nothing ignored.</p>
<h3 id="candidate-face"><a href="#candidate-face"><span class="header-section-number">10.7.10</span> <code>candidate-face</code></a></h3>
<p>Specify a face of candidate. It overrides <a href="#ac-candidate-face"><code>ac-candidate-face</code></a> partially.</p>
<h3 id="selection-face"><a href="#selection-face"><span class="header-section-number">10.7.11</span> <code>selection-face</code></a></h3>
<p>Specify a face of selection. It overrides <a href="#ac-selection-face"><code>ac-selection-face</code></a> partially.</p>
<h3 id="depends"><a href="#depends"><span class="header-section-number">10.7.12</span> <code>depends</code></a></h3>
<p>Specify a list of features (which are <code>require</code>d) that the source is depending.</p>
<h3 id="available"><a href="#available"><span class="header-section-number">10.7.13</span> <code>available</code></a></h3>
<p>Specify a function or an expression that describe the source is available or not.</p>
<h3 id="document"><a href="#document"><span class="header-section-number">10.7.14</span> <code>document</code></a></h3>
<p>Specify a function or an expression that returns documentation of the candidate.</p>
<h2 id="variables"><a href="#variables"><span class="header-section-number">10.8</span> Variables</a></h2>
<p>Here is a list of often used variables.</p>
<h3 id="ac-buffer"><a href="#ac-buffer"><span class="header-section-number">10.8.1</span> <code>ac-buffer</code></a></h3>
<p>A buffer where completion started.</p>
<h3 id="ac-point"><a href="#ac-point"><span class="header-section-number">10.8.2</span> <code>ac-point</code></a></h3>
<p>A start point of completion target string.</p>
<h3 id="ac-prefix"><a href="#ac-prefix"><span class="header-section-number">10.8.3</span> <code>ac-prefix</code></a></h3>
<p>A string of completion target.</p>
<h3 id="ac-limit"><a href="#ac-limit"><span class="header-section-number">10.8.4</span> <code>ac-limit</code></a></h3>
<p>A limit of candidates. Its value may be one of <a href="#ac-candidate-limit"><code>ac-candidate-limit</code></a> and <a href="#limit"><code>limit</code></a> property.</p>
<h3 id="ac-candidates"><a href="#ac-candidates"><span class="header-section-number">10.8.5</span> <code>ac-candidates</code></a></h3>
<p>A list of candidates.</p>
<h1 id="trouble-shooting"><a href="#trouble-shooting"><span class="header-section-number">11</span> Trouble Shooting</a></h1>
<h2 id="response-latency"><a href="#response-latency"><span class="header-section-number">11.1</span> Response Latency</a></h2>
<p>To keep much responsibility is very important for <code>auto-complete-mode</code>. However it is well known fact that a performance is a trade off of functionalities. List up options related to the performance.</p>
<h3 id="ac-auto-start-1"><a href="#ac-auto-start-1"><span class="header-section-number">11.1.1</span> <code id="trouble-ac-auto-start">ac-auto-start</code></a></h3>
<p>For a larger number, it reduces a cost of generating completion candidates. Or you can remove the cost by setting <code>nil</code> and you can use when you truly need. See <a href="#not-to-complete-automatically">Not to complete automatically</a> for more details.</p>
<h3 id="ac-delay-1"><a href="#ac-delay-1"><span class="header-section-number">11.1.2</span> <code id="trouble-ac-delay">ac-delay</code></a></h3>
<p>For a larger number, it reduces a cost of starting completion.</p>
<h3 id="ac-auto-show-menu-1"><a href="#ac-auto-show-menu-1"><span class="header-section-number">11.1.3</span> <code id="trouble-ac-auto-show-menu">ac-auto-show-menu</code></a></h3>
<p>For a larger number, it reduces a displaying cost of completion menu.</p>
<h3 id="ac-use-comphist-1"><a href="#ac-use-comphist-1"><span class="header-section-number">11.1.4</span> <code id="trouble-ac-use-comphist">ac-use-comphist</code></a></h3>
<p>Setting <a href="#ac-use-comphist"><code>ac-use-comphist</code></a> to <code>nil</code> to disable <a href="#candidate-suggestion">Candidate Suggestion</a>, it reduces a cost of suggestion.</p>
<h3 id="ac-candidate-limit-1"><a href="#ac-candidate-limit-1"><span class="header-section-number">11.1.5</span> <code id="trouble-ac-candidate-limit">ac-candidate-limit</code></a></h3>
<p>For a property number, it reduces much computation of generating candidates.</p>
<h2 id="completion-menu-is-disrupted"><a href="#completion-menu-is-disrupted"><span class="header-section-number">11.2</span> Completion menu is disrupted</a></h2>
<p>There is two major cases.</p>
<h3 id="column-computation-case"><a href="#column-computation-case"><span class="header-section-number">11.2.1</span> Column Computation Case</a></h3>
<p><code>auto-complete-mode</code> tries to reduce a cost of computation of columns to show completion menu correctly by using a optimized function at the expense of accuracy. However, it probably causes a menu to be disrupted. Not to use the optimized function, evaluate the following code:</p>
<pre><code>(setq popup-use-optimized-column-computation nil)</code></pre>
<h3 id="font-case"><a href="#font-case"><span class="header-section-number">11.2.2</span> Font Case</a></h3>
<p>There is a problem when render <a href="http://ossipedia.ipa.go.jp/ipafont/">IPA font</a> with Xft in Ubuntu 9.10. Use <a href="http://dicey.org/vlgothic/">VL gothic</a>, which renders more suitably. Or disable Xft, then it can render correctly.</p>
<p>We don't good answers now, but you may shot the troubles by changing font size with <code>set-face-font</code>. For instance, completion menu may be disrupted when displaying the menu including Japanese in NTEmacs. In such case, it is worth to try to evaluate the following code to fix it:</p>
<pre><code>(set-face-font &#39;ac-candidate-face &quot;MS Gothic 11&quot;)
(set-face-font &#39;ac-selection-face &quot;MS Gothic 11&quot;)</code></pre>
<h1 id="known-bugs"><a href="#known-bugs"><span class="header-section-number">12</span> Known Bugs</a></h1>
<h2 id="flyspell-mode-bug"><a href="#flyspell-mode-bug"><span class="header-section-number">12.1</span> Auto completion will not be started in a buffer <code>flyspell-mode</code> enabled</a></h2>
<p>A way of delaying processes of <code>flyspell-mode</code> disables auto completion. You can avoid this problem by <code>M-x ac-flyspell-workaround</code>. You can write the following code into your <code>~/.emacs</code>.</p>
<pre><code>(ac-flyspell-workaround)</code></pre>
<h2 id="linum-mode-bug"><a href="#linum-mode-bug"><span class="header-section-number">12.2</span> <code>linum-mode</code> tries to display the line numbers even for the comletion menu</a></h2>
<p>linum-mode tries to add the line numbers even for the comletion menu. To stop that annoying behavior, do <code>M-x ac-linum-workaround</code> or add the following code into your <code>~/.emacs</code>.</p>
<pre><code>(ac-linum-workaround)</code></pre>
<h1 id="reporting-bugs"><a href="#reporting-bugs"><span class="header-section-number">13</span> Reporting Bugs</a></h1>
<p>Visit <a href="https://github.com/auto-complete/auto-complete/issues">Auto-Complete Issue Tracker</a> and create a new issue.</p>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Strictly <code>re-search-backward</code> with the added adding <code>\=</code> at the end<a href="#fnref1"></a></p></li>
</ol>
</div>
</body>
</html>
